(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[37],{1071:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/retro-chat-connect",function(){return n(5125)}])},5125:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=n(5893),i=n(7294),a=n(3977),o=n(1019);let r=(0,a.ZF)({apiKey:"AIzaSyC3CrUNAGRVhqeYO5sZho_6ESTwv8VJrTs",authDomain:"cian0-4823e.firebaseapp.com",projectId:"cian0-4823e",storageBucket:"cian0-4823e.appspot.com",messagingSenderId:"787470014397",databaseURL:"https://cian0-4823e-default-rtdb.firebaseio.com/",appId:"1:787470014397:web:3213c3fa4a105d9a4c64d4",measurementId:"G-FEWCH0C7LM"}),l=(0,o.N8)(r);var c=()=>{let[e,t]=(0,i.useState)([]),[n,a]=(0,i.useState)(""),[r,c]=(0,i.useState)(""),[d,u]=(0,i.useState)(""),[m,p]=(0,i.useState)(!1),x=(0,i.useRef)(null),h=(0,i.useRef)(null);return(0,i.useEffect)(()=>{var e;null===(e=x.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[e]),(0,i.useEffect)(()=>{let e=()=>{if(h.current){let{offsetWidth:e,offsetHeight:t,scrollHeight:n}=h.current,s=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight;console.log("Viewport size: ".concat(s,"x").concat(i)),console.log("Container size: ".concat(e,"x").concat(t,", Scroll height: ").concat(n)),console.log("Body scroll height: ".concat(document.body.scrollHeight))}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,s.jsxs)("div",{ref:h,className:"nes-container is-dark full-height-layout",style:{maxWidth:"800px",width:"100%",margin:"0 auto",padding:"10px",boxSizing:"border-box",border:"none",borderRadius:"0"},children:[(0,s.jsx)("h2",{className:"nes-text is-primary",style:{margin:"0 0 10px 0",fontSize:"1.2em"},children:"Retro Chat"}),m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"scroll-container",style:{marginBottom:"10px",border:"4px solid #fff",borderRadius:"4px",padding:"10px"},children:[e.map((e,t)=>(0,s.jsx)("div",{style:{textAlign:e.sender===r?"right":"left",marginBottom:"5px"},children:(0,s.jsxs)("span",{className:"nes-text ".concat(e.sender===r?"is-primary":"is-success"),style:{fontSize:"0.8em"},children:[e.sender!==r&&(0,s.jsxs)("strong",{children:[e.sender,": "]}),e.text]})},t)),(0,s.jsx)("div",{ref:x})]}),(0,s.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),n.trim()&&r&&d){let e=(0,o.iH)(l,"rooms/".concat(d,"/messages"));(0,o.VF)(e,{text:n,sender:r,timestamp:Date.now()}),a("")}},style:{display:"flex",flexDirection:"column"},children:[(0,s.jsx)("input",{type:"text",className:"nes-input",value:n,onChange:e=>a(e.target.value),placeholder:"Type your message...",style:{marginBottom:"5px",fontSize:"0.8em"}}),(0,s.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"5px",marginBottom:"5px"},children:["\uD83D\uDE0A","\uD83D\uDE02","❤️","\uD83D\uDC4D","\uD83C\uDFAE","\uD83D\uDD79️","\uD83D\uDC7E","\uD83D\uDE80"].map(e=>(0,s.jsx)("button",{type:"button",className:"nes-btn is-primary",onClick:()=>a(n+e),style:{flex:"1 0 auto",minWidth:"30px",padding:"2px",fontSize:"0.8em"},children:e},e))}),(0,s.jsx)("button",{type:"submit",className:"nes-btn is-success",style:{padding:"5px",fontSize:"0.8em"},children:"Send"})]})]}):(0,s.jsxs)("div",{className:"nes-field",style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,s.jsx)("input",{type:"text",className:"nes-input",placeholder:"Enter your username",value:r,onChange:e=>c(e.target.value),style:{marginBottom:"10px",fontSize:"0.9em"}}),(0,s.jsx)("input",{type:"text",className:"nes-input",placeholder:"Enter room ID",value:d,onChange:e=>u(e.target.value),style:{marginBottom:"10px",fontSize:"0.9em"}}),(0,s.jsx)("button",{className:"nes-btn is-primary",onClick:()=>{if(r&&d){let e=(0,o.iH)(l,"rooms/".concat(d));(0,o.t8)(e,{active:!0}),p(!0),(0,o.yv)((0,o.iH)(l,"rooms/".concat(d,"/messages")),e=>{let n=e.val();t(e=>[...e,n])})}},style:{fontSize:"0.9em"},children:"Join Room"})]})]})},d=()=>(0,s.jsxs)("div",{className:"nes-container is-dark with-title",style:{maxWidth:"900px",margin:"2rem auto"},children:[(0,s.jsx)("p",{className:"title",children:"Retro Chat Connect"}),(0,s.jsxs)("div",{className:"nes-container is-rounded",children:[(0,s.jsx)("p",{className:"nes-text is-primary",children:"Welcome to Retro Chat Connect!"}),(0,s.jsx)("p",{children:"Share your unique room ID with a friend to start chatting."})]}),(0,s.jsx)(c,{})]})}},function(e){e.O(0,[627,142,888,774,179],function(){return e(e.s=1071)}),_N_E=e.O()}]);