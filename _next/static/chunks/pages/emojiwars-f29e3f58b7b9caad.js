(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[204],{2830:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/emojiwars",function(){return a(5349)}])},5349:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var o=a(5893),r=a(7294),s=a(1664),n=a.n(s),l=a(4165),i=a.n(l),c=()=>{let e=(0,r.useRef)(null),[t,a]=(0,r.useState)(!1),[s,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(""),h=(0,r.useMemo)(()=>({INITIAL_EMOJI_COUNT:200,MAX_SPEED:300,EMOJI_SIZE:24,WORLD_WIDTH:1600,WORLD_HEIGHT:1200,SEPARATION_DISTANCE:30,ALIGNMENT_DISTANCE:50,COHESION_DISTANCE:70,MAX_FORCE:1.5,WANDER_STRENGTH:500,PREY_ATTRACTION_STRENGTH:5e3,POWER_UP_DURATION:5e3,POWER_UP_SPAWN_INTERVAL:200,NINJA_POWER_UP_SPAWN_INTERVAL:100,TILE_SIZE:64,CELL_SIZE:100}),[]),D=(0,r.useMemo)(()=>["\uD83D\uDDFF","\uD83D\uDCC4","✂️","\uD83D\uDD25","\uD83D\uDCA7","\uD83C\uDF31"],[]),d=(0,r.useMemo)(()=>({ground:"\uD83D\uDFEB",grass:"\uD83D\uDFE9",water:"\uD83D\uDFE6",sand:"\uD83D\uDFE8",mountain:"⛰️"}),[]),y=(0,r.useMemo)(()=>({"\uD83D\uDDFF":["✂️","\uD83D\uDD25"],"\uD83D\uDCC4":["\uD83D\uDDFF","\uD83D\uDCA7"],"✂️":["\uD83D\uDCC4","\uD83C\uDF31"],"\uD83D\uDD25":["\uD83D\uDCC4","\uD83C\uDF31"],"\uD83D\uDCA7":["\uD83D\uDD25","\uD83D\uDDFF"],"\uD83C\uDF31":["\uD83D\uDCA7","✂️"]}),[]);(0,r.useEffect)(()=>{if(t){let e=document.createElement("script");return e.src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.55.2/phaser.min.js",e.async=!0,document.body.appendChild(e),e.onload=p,()=>{document.body.removeChild(e)}}},[t]);let p=()=>{let t={type:Phaser.AUTO,width:"100%",height:"100%",parent:e.current,physics:{default:"arcade",arcade:{gravity:{y:0},debug:!1}},scene:{preload:N,create:C,update:w}};new Phaser.Game(t)},x,E,_,m={},f={},N=function(){},C=function(){this.cameras.main.setBounds(0,0,h.WORLD_WIDTH,h.WORLD_HEIGHT),this.physics.world.setBounds(0,0,h.WORLD_WIDTH,h.WORLD_HEIGHT),P(this),x=this.physics.add.group(),E=this.physics.add.group(),_=this.physics.add.group(),D.forEach(e=>f[e]=0);for(let e=0;e<h.INITIAL_EMOJI_COUNT;e++)M(this);this.physics.add.collider(x,x,S,null,this),this.physics.add.overlap(x,_,I,null,this),this.physics.add.overlap(x,E,R,null,this);let e=this.add.circle(h.WORLD_WIDTH/2,h.WORLD_HEIGHT/2,1,16777215,0);this.cameras.main.startFollow(e,!0,.05,.05),this.time.addEvent({delay:5e3,callback:z,callbackScope:this,loop:!0}),this.time.addEvent({delay:1e4,callback:J,callbackScope:this,loop:!0}),this.time.addEvent({delay:h.POWER_UP_SPAWN_INTERVAL,callback:()=>j(this),callbackScope:this,loop:!0}),this.time.addEvent({delay:h.NINJA_POWER_UP_SPAWN_INTERVAL,callback:()=>T(this),callbackScope:this,loop:!0})},w=function(){if(A(),x.getChildren().forEach(e=>{e.active&&(O(e),e.x=Phaser.Math.Wrap(e.x,0,h.WORLD_WIDTH),e.y=Phaser.Math.Wrap(e.y,0,h.WORLD_HEIGHT),e.getData("ninjaPowerUp")?e.setScale(1.8):e.getData("powerUp")?e.setScale(1.5):e.setScale(1))}),this.physics.world.collide(x,x,S,null,this),this.time.now%60==0&&Z(),this.time.now%300==0){let e=Object.keys(f).filter(e=>f[e]>0);1===e.length&&(l(e[0]),this.scene.pause())}},P=e=>{let{WORLD_WIDTH:t,WORLD_HEIGHT:a,TILE_SIZE:o}=h;for(let r=0;r<t;r+=o)for(let t=0;t<a;t+=o){let a=g(Y(.05*r,.05*t));e.add.text(r,t,a,{fontSize:"".concat(o,"px")}).setOrigin(0)}},g=e=>e<-1.5?d.water:e<-1.2?d.mountain:e<-.8?d.sand:e<2?d.grass:d.ground,M=(e,t,a)=>{let{WORLD_WIDTH:o,WORLD_HEIGHT:r,EMOJI_SIZE:s}=h;t=t||Phaser.Math.Between(0,o),a=a||Phaser.Math.Between(0,r);let n=Phaser.Math.RND.pick(D),l=e.add.text(t,a,n,{fontSize:"24px"}).setOrigin(.5);return e.physics.add.existing(l),l.body.setCircle(s/2),l.body.setCollideWorldBounds(!0),l.body.setBounce(1,1),l.setData("type",n),l.setData("powerUp",!1),x.add(l),f[n]++,l},j=e=>{let{WORLD_WIDTH:t,WORLD_HEIGHT:a,EMOJI_SIZE:o}=h,r=Phaser.Math.Between(0,t),s=Phaser.Math.Between(0,a),n=e.add.text(r,s,"⭐",{fontSize:"24px"}).setOrigin(.5);e.physics.add.existing(n),n.body.setCircle(o/2),E.add(n)},T=e=>{let{WORLD_WIDTH:t,WORLD_HEIGHT:a,EMOJI_SIZE:o}=h,r=Phaser.Math.Between(0,t),s=Phaser.Math.Between(0,a),n=e.add.text(r,s,"\uD83E\uDD77",{fontSize:"24px"}).setOrigin(.5);e.physics.add.existing(n),n.body.setCircle(o/2),_.add(n)},I=(e,t)=>{let{POWER_UP_DURATION:a}=h;t.destroy(),e.setData("ninjaPowerUp",!0),e.scene.time.delayedCall(a,()=>{e.setData("ninjaPowerUp",!1)})},R=(e,t)=>{let{POWER_UP_DURATION:a}=h;t.destroy(),e.setData("powerUp",!0),e.scene.time.delayedCall(a,()=>{e.setData("powerUp",!1)})},S=(e,t)=>{let a=e.getData("type"),o=t.getData("type");e.getData("ninjaPowerUp")?(b(t,a),v(e,t)):t.getData("ninjaPowerUp")?(b(e,o),v(t,e)):y[a].includes(o)?t.getData("powerUp")||(b(t,a),v(e,t)):y[o].includes(a)?e.getData("powerUp")||(b(e,o),v(t,e)):v(e,t)},b=(e,t)=>{let a=e.getData("type");f[a]--,f[t]++,e.setData("type",t),e.setText(t)},v=(e,t)=>{let a=Phaser.Math.Angle.Between(e.x,e.y,t.x,t.y);e.body.velocity.x-=1*Math.cos(a),e.body.velocity.y-=1*Math.sin(a),t.body.velocity.x+=1*Math.cos(a),t.body.velocity.y+=1*Math.sin(a)},A=()=>{m={};let{CELL_SIZE:e}=h;x.getChildren().forEach(t=>{let a=Math.floor(t.x/e),o=Math.floor(t.y/e),r="".concat(a,",").concat(o);m[r]||(m[r]=[]),m[r].push(t)})},O=e=>{let t=B(e);if(t.length>0){let a=W(e,t),o=F(e,t),r=H(e,t),s=L(),n=k(e),{MAX_SPEED:l}=h;e.body.velocity.x+=1.5*a.x+o.x+r.x+s.x+n.x,e.body.velocity.y+=1.5*a.y+o.y+r.y+s.y+n.y;let i=Math.sqrt(e.body.velocity.x**2+e.body.velocity.y**2);i>l&&(e.body.velocity.x=e.body.velocity.x/i*l,e.body.velocity.y=e.body.velocity.y/i*l)}},B=e=>{let{CELL_SIZE:t,COHESION_DISTANCE:a}=h,o=Math.floor(e.x/t),r=Math.floor(e.y/t),s=[];for(let t=-1;t<=1;t++)for(let n=-1;n<=1;n++){let l="".concat(o+t,",").concat(r+n);m[l]&&m[l].forEach(t=>{t!==e&&Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y)<a&&e.getData("type")===t.getData("type")&&s.push(t)})}return s},W=(e,t)=>{let a={x:0,y:0},{SEPARATION_DISTANCE:o}=h;return t.forEach(t=>{let r=Phaser.Math.Distance.Between(e.x,e.y,t.x,t.y);if(r<o){let o={x:e.x-t.x,y:e.y-t.y};a.x+=o.x/r,a.y+=o.y/r}}),U(a)},F=(e,t)=>{let a={x:0,y:0};return t.length>0&&(t.forEach(e=>{a.x+=e.body.velocity.x,a.y+=e.body.velocity.y}),a.x/=t.length,a.y/=t.length),U(a)},H=(e,t)=>{let a={x:0,y:0};return t.length>0&&(t.forEach(e=>{a.x+=e.x,a.y+=e.y}),a.x/=t.length,a.y/=t.length,a.x-=e.x,a.y-=e.y),U(a)},U=e=>{let{MAX_FORCE:t}=h,a=Math.sqrt(e.x**2+e.y**2);return a>t&&(e.x=e.x/a*t,e.y=e.y/a*t),e},L=()=>{let{WANDER_STRENGTH:e}=h;return{x:(Math.random()-.5)*e,y:(Math.random()-.5)*e}},k=e=>{let t=G(e);if(t){let a=t.x-e.x,o=t.y-e.y,r=Math.sqrt(a*a+o*o),{PREY_ATTRACTION_STRENGTH:s}=h;return{x:a/r*s,y:o/r*s}}return{x:0,y:0}},G=e=>{let t=null,a=1/0,{CELL_SIZE:o}=h,r=Math.floor(e.x/o),s=Math.floor(e.y/o);for(let o=-1;o<=1;o++)for(let n=-1;n<=1;n++){let l="".concat(r+o,",").concat(s+n);m[l]&&m[l].forEach(o=>{if(e!==o&&y[e.getData("type")].includes(o.getData("type"))){let r=Phaser.Math.Distance.Between(e.x,e.y,o.x,o.y);r<a&&(a=r,t=o)}})}return t},z=function(){let{WORLD_WIDTH:e,WORLD_HEIGHT:t}=h,a=Phaser.Math.Between(0,e),o=Phaser.Math.Between(0,t);this.cameras.main.pan(a,o,5e3,"Sine.easeInOut")},J=function(){let e=Phaser.Math.FloatBetween(.5,1.5);this.cameras.main.zoomTo(e,5e3,"Sine.easeInOut")},Z=()=>{let e=["\uD83D\uDD22 Emoji Counts:"];D.forEach(t=>{e.push("  ".concat(t,": ").concat(f[t]))}),e.push(""),e.push("\uD83E\uDDB8 Active Emojis: ".concat(x.countActive())),e.push("⭐ Power-ups: ".concat(E.countActive())),e.push("\uD83E\uDD77 Ninja Power-ups: ".concat(_.countActive())),u(e.join("\n"))},V=Array(512),X=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];for(let e=0;e<256;e++)V[e]=V[e+256]=X[e];let q=(e,t,a)=>{let o=15&e,r=1+(7&o);return(8&o?-r:r)*t+(4&o?-r:r)*a},Y=(e,t)=>{let a=255&Math.floor(e),o=255&Math.floor(t);e-=Math.floor(e),t-=Math.floor(t);let r=K(e),s=K(t),n=V[a]+o,l=V[a+1]+o;return Q(s,Q(r,q(V[n],e,t),q(V[l],e-1,t)),Q(r,q(V[n+1],e,t-1),q(V[l+1],e-1,t-1)))},Q=(e,t,a)=>t+e*(a-t),K=e=>e*e*e*(e*(6*e-15)+10);return(0,o.jsx)("div",{className:i().retroContainer,children:(0,o.jsxs)("div",{className:i().retroPost,children:[(0,o.jsx)("div",{className:i().retroHeader,children:"\uD83C\uDFAE Emoji Battle Royale \uD83C\uDFC6"}),t?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{ref:e,className:i().gameContainer}),(0,o.jsx)("div",{className:i().retroSection,children:(0,o.jsx)("pre",{className:i().debugInfo,children:c})}),s&&(0,o.jsx)("div",{className:i().retroSection,children:(0,o.jsxs)("p",{className:i().retroText,children:[s," Wins the Battle!"]})})]}):(0,o.jsxs)("div",{className:i().retroSection,children:[(0,o.jsx)("p",{className:i().retroText,children:"Ready to enter the emoji arena?"}),(0,o.jsx)("p",{className:i().retroText,children:"New feature: Ninja power-up! \uD83E\uDD77 Defeat any emoji!"}),(0,o.jsx)("button",{className:i().retroButton,onClick:()=>a(!0),children:"\uD83D\uDE80 Start Battle"})]}),(0,o.jsx)("div",{className:i().retroSection,children:(0,o.jsx)(n(),{href:"/",className:i().retroButton,children:"\uD83C\uDFE0 Return to Cyberhome"})})]})})},u=()=>(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{children:"Emoji Wars"}),(0,o.jsx)(c,{})]})},4165:function(e){e.exports={retroContainer:"EmojiBattleRoyale_retroContainer__ewt_I",retroPost:"EmojiBattleRoyale_retroPost__8Ymnd",retroHeader:"EmojiBattleRoyale_retroHeader__QhU4r",retroSection:"EmojiBattleRoyale_retroSection__kGZhH",retroText:"EmojiBattleRoyale_retroText__wiBr3",retroButton:"EmojiBattleRoyale_retroButton__wuP2Z",gameContainer:"EmojiBattleRoyale_gameContainer__wY0Rk"}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=2830)}),_N_E=e.O()}]);